var H=t=>{throw TypeError(t)};var z=(t,e,s)=>e.has(t)||H("Cannot "+s);var m=(t,e,s)=>(z(t,e,"read from private field"),s?s.call(t):e.get(t)),P=(t,e,s)=>e.has(t)?H("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();const Y=()=>{const t=new Set;return{subscribe:n=>t.add(n),notify:()=>t.forEach(n=>n())}},X="/front_5th_chapter1-2";var f,p;class Z{constructor(){P(this,f,new Map);P(this,p,new WeakMap)}setupEventListeners(e){m(this,p).has(e)||m(this,p).set(e,new Set);const s=m(this,p).get(e);m(this,f).forEach((n,o)=>{s.has(o)||(e.addEventListener(o,a=>{for(const[l,d]of n)l.contains(a.target)&&d.call(l,a)}),s.add(o))})}addEvent(e,s,n){m(this,f).has(s)||m(this,f).set(s,new Map),m(this,f).get(s).set(e,n)}removeEvent(e,s,n){const o=m(this,f).get(s);if(!o)return;o.get(e)===n&&o.delete(e)}}f=new WeakMap,p=new WeakMap;const F=new Z,ee=t=>F.setupEventListeners(t),te=(t,e,s)=>F.addEvent(t,e,s),se=(t,e,s)=>F.removeEvent(t,e,s);function re(t,e,s,n){const o=e.slice(2).toLowerCase();n!==s&&te(t,o,s)}function ne(t,e,s,n){const o=e==="className"?"class":e;n!==s&&t.setAttribute(o,s)}function oe(t,e,s){const n=e.slice(2).toLowerCase();se(t,n,s)}function ae(t,e){const s=e==="className"?"class":e;t.removeAttribute(s)}function R(t,e,s){e&&Object.entries(e).forEach(([n,o])=>{n.startsWith("on")?re(t,n,o,s?.[n]||(()=>{})):ne(t,n,o,s?.[n]||"")}),s&&Object.keys(s).forEach(n=>{e&&n in e||(n.startsWith("on")?oe(t,n,s[n]):ae(t,n))})}function S(t){if(Array.isArray(t)){const s=document.createDocumentFragment();return t.forEach(n=>{s.appendChild(S(n))}),s}if(t==null||typeof t=="boolean")return document.createTextNode("");if(typeof t=="string"||typeof t=="number")return document.createTextNode(t.toString());const e=document.createElement(t.type);return R(e,t.props,null),t.children.forEach(s=>{e.appendChild(S(s))}),e}function r(t,e,...s){return{type:t,props:e,children:_(s)}}function _(t){return t.reduce((e,s)=>s==null||s===!1?e:e.concat(Array.isArray(s)?_(s):s),[])}function A(t){if(t==null||typeof t=="boolean")return"";if(typeof t=="string"||typeof t=="number")return String(t);if(typeof t.type=="function"){const e=t.type;return A(e({...t.props,children:t.children}))}return{type:t.type,props:t.props,children:t.children.map(A).filter(e=>e!=="")}}function le(t,e,s,n){const o=t.childNodes[n],a=String(e);if(typeof s=="string"||typeof s=="number"){a!==String(s)&&(o.nodeValue=a);return}t.replaceChild(document.createTextNode(a),o)}function V(t,e,s,n=0){if(!t)return;const o=t.childNodes[n];if(!e&&!s)return;if(e&&!s)return t.appendChild(S(e));if(!e&&s)return t.removeChild(o);if(typeof e=="string"||typeof e=="number")return le(t,e,s,n);const a=e;if(a.type!==s.type)return t.replaceChild(S(a),o);R(o,a.props,s.props);const l=a.children||[],d=s.children||[],h=Math.max(l.length,d.length);for(let c=0;c<h;c+=1)V(o,l[c],d[c],c)}const G=new WeakMap;function ie(t,e){const s=A(t),n=G.get(e);n?V(e,s,n):e.replaceChildren(S(s)),G.set(e,s),ee(e)}const ce=1e3,L=ce*60,O=L*60,ue=O*24,me=t=>{const e=Date.now()-t;return e<L?"방금 전":e<O?`${Math.floor(e/L)}분 전`:e<ue?`${Math.floor(e/O)}시간 전`:new Date(t).toLocaleString()},de=(t,e)=>{const{subscribe:s,notify:n}=Y();let o={...t};const a=h=>{o={...o,...h},n()},l=()=>({...o}),d=Object.fromEntries(Object.entries(e).map(([h,c])=>[h,(...u)=>a(c(l(),...u))]));return{getState:l,setState:a,subscribe:s,actions:d}},fe=(t,e=window.localStorage)=>({get:()=>JSON.parse(e.getItem(t)??"null"),set:a=>e.setItem(t,JSON.stringify(a)),reset:()=>e.removeItem(t)}),g=fe("user"),he={currentUser:g.get(),loggedIn:!!g.get(),error:null},ge={login(t,e){const s={username:e,email:"",bio:""};return g.set(s),{...t,currentUser:s,loggedIn:!0,error:null}},logout(t){return g.reset(),{...t,currentUser:null,loggedIn:!1,error:null}},updateProfile(t,e){return g.set(e),{...t,currentUser:e,error:null}},setError(t,e){return{...t,error:e}},clearError(t){return{...t,error:null}}},i=de(he,ge);class pe{constructor(e){this.subscribers=[],this.state=e}getState(){return this.state}setState(e){this.state={...this.state,...e},this.notify()}subscribe(e){return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter(s=>s!==e)}}notify(){this.subscribers.forEach(e=>e(this.state))}}const be=1e3,b=be*60,Se=b*60,xe=[{id:1,author:"홍길동",time:Date.now()-5*b,content:"오늘 날씨가 정말 좋네요. 다들 좋은 하루 보내세요!",likeUsers:[]},{id:2,author:"김철수",time:Date.now()-15*b,content:"새로운 프로젝트를 시작했어요. 열심히 코딩 중입니다!",likeUsers:[]},{id:3,author:"이영희",time:Date.now()-30*b,content:"오늘 점심 메뉴 추천 받습니다. 뭐가 좋을까요?",likeUsers:[]},{id:4,author:"박민수",time:Date.now()-30*b,content:"주말에 등산 가실 분 계신가요? 함께 가요!",likeUsers:[]},{id:5,author:"정수연",time:Date.now()-2*Se,content:"새로 나온 영화 재미있대요. 같이 보러 갈 사람?",likeUsers:[]}];class we extends pe{constructor(){const e=xe;super({posts:e})}addPost(e){const{posts:s}=this.getState(),n={...e,id:s.length+1,time:Date.now(),likeUsers:[]};this.setState({posts:[...s,n]})}deletePost(e){const{posts:s}=this.getState();this.setState({posts:s.filter(n=>n.id!==e)})}likePost(e,s){const{posts:n}=this.getState();this.setState({posts:n.map(o=>o.id===e?{...o,likeUsers:o.likeUsers.includes(s)?o.likeUsers.filter(a=>a!==s):[...o.likeUsers,s]}:o)})}}const x=new we,T={success(t){alert(t)},error(t){alert(t)}},k={LOGIN_REQUIRED:"로그인 후 이용해주세요",PROFILE_UPDATED:"프로필이 업데이트되었습니다."},Ee=({id:t,author:e,time:s,content:n,likeUsers:o})=>{const{loggedIn:a,currentUser:l}=i.getState(),{posts:d}=x.getState(),h=()=>{if(!a||!l)return T.error(k.LOGIN_REQUIRED),null;const c=d.map(u=>u.id===t?u.likeUsers.includes(l.username)?{...u,likeUsers:u.likeUsers.filter(K=>K!==l.username)}:{...u,likeUsers:[...u.likeUsers,l.username]}:u);x.setState({posts:c})};return r("div",{className:"bg-white rounded-lg shadow p-4 mb-4"},r("div",{className:"flex items-center mb-2"},r("div",null,r("div",{className:"font-bold"},e),r("div",{className:"text-gray-500 text-sm"},me(s)))),r("p",null,n),r("div",{className:"mt-2 flex justify-between text-gray-500"},r("span",{className:`like-button cursor-pointer${l&&o.includes(l.username)?" text-blue-500":""}`,onClick:h},"좋아요 ",o.length),r("span",null,"댓글"),r("span",null,"공유")))},q=t=>{const e=document.getElementById(t);if(!e)throw new Error(`Element with id '${t}' not found`);return e},B=t=>q(t).value,ye=(t,e)=>{const s=q(t);s.value=e},Ne=t=>{ye(t,"")};class j{withPreventDefault(e){return s=>{s.preventDefault(),e(s)}}withInputClear(e){return s=>n=>{s(n),Ne(e)}}getFormData(e){return Object.fromEntries(new FormData(e))}}class ve extends j{constructor(){super(...arguments),this.handleProfileSubmit=e=>{const s=this.getProfileData(e);this.updateProfile(s)},this.handleSubmit=this.withPreventDefault(this.handleProfileSubmit)}getProfileData(e){const s=new FormData(e.target);return Object.fromEntries(s)}updateProfile(e){const s={...i.getState().currentUser,...e};i.setState({currentUser:s}),g.set(s),T.success(k.PROFILE_UPDATED)}}const Pe=()=>new ve,E={POST_CONTENT:"post-content",USERNAME:"username"};class Ue extends j{constructor(){super(...arguments),this.handlePostSubmit=e=>{const s=i.getState().currentUser;if(!s){T.error(k.LOGIN_REQUIRED);return}const n=B(E.POST_CONTENT);this.createPost(n,s.username)},this.handleSubmit=this.withPreventDefault(this.withInputClear(E.POST_CONTENT)(this.handlePostSubmit))}createPost(e,s){const{posts:n}=x.getState(),o={id:n.length+1,author:s,time:Date.now(),content:e,likeUsers:[]};x.setState({posts:[...n,o]})}}const De=()=>new Ue,Ce=()=>{const{handleSubmit:t}=De();return r("div",{className:"mb-4 bg-white rounded-lg shadow p-4"},r("textarea",{id:E.POST_CONTENT,placeholder:"무슨 생각을 하고 계신가요?",className:"w-full p-2 border rounded"}),r("button",{id:"post-submit",className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded",onClick:t},"게시"))},W=()=>r("header",{className:"bg-blue-600 text-white p-4 sticky top-0"},r("h1",{className:"text-2xl font-bold"},"항해플러스")),Q=()=>r("footer",{className:"bg-gray-200 p-4 text-center"},r("p",null,"© $",new Date().getFullYear()," 항해플러스. All rights reserved.")),w={value:null,get(){return this.value},set(t){this.value=t}},U=t=>window.location.pathname===X+t?"text-blue-600 font-bold":"text-gray-600";function D({onClick:t,children:e,...s}){return r("a",{onClick:o=>{o.preventDefault(),t?.();const a=o.target;w.get()?.push(a.href.replace(window.location.origin,""))},...s},e)}const J=()=>{const{loggedIn:t}=i.getState(),{logout:e}=i.actions;return r("nav",{className:"bg-white shadow-md p-2 sticky top-14"},r("ul",{className:"flex justify-around"},r("li",null,r(D,{href:"/",className:U("/")},"홈")),!t&&r("li",null,r(D,{href:"/login",className:U("/login")},"로그인")),t&&r("li",null,r(D,{href:"/profile",className:U("/profile")},"프로필")),t&&r("li",null,r("a",{href:"#",id:"logout",className:"text-gray-600",onClick:s=>{s.preventDefault(),e()}},"로그아웃"))))},Fe=()=>{const{loggedIn:t}=i.getState(),{posts:e}=x.getState();return r("div",{className:"bg-gray-100 min-h-screen flex justify-center"},r("div",{className:"max-w-md w-full"},r(W,null),r(J,null),r("main",{className:"p-4"},t?r(Ce,null):null,r("div",{id:"posts-container",className:"space-y-4"},[...e].sort((s,n)=>n.time-s.time).map(s=>r(Ee,{...s})))),r(Q,null)))};class Ae extends j{constructor(){super(...arguments),this.handleLoginSubmit=e=>{const n={username:B(E.USERNAME),email:"",bio:""};i.setState({currentUser:n,loggedIn:!0}),g.set(n)},this.handleSubmit=this.withPreventDefault(this.handleLoginSubmit)}}const Le=()=>new Ae,Te=()=>{const{handleSubmit:t}=Le();return r("div",{className:"bg-gray-100 flex items-center justify-center min-h-screen"},r("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md"},r("h1",{className:"text-2xl font-bold text-center text-blue-600 mb-8"},"항해플러스"),r("form",{id:"login-form",onSubmit:t},r("input",{type:"text",id:"username",placeholder:"사용자 이름",className:"w-full p-2 mb-4 border rounded",required:!0}),r("input",{type:"password",placeholder:"비밀번호",className:"w-full p-2 mb-6 border rounded",required:!0}),r("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded"},"로그인")),r("div",{className:"mt-4 text-center"},r("a",{href:"#",className:"text-blue-600 text-sm"},"비밀번호를 잊으셨나요?")),r("hr",{className:"my-6"}),r("div",{className:"text-center"},r("button",{className:"bg-green-500 text-white px-4 py-2 rounded"},"새 계정 만들기"))))},Oe=()=>r("main",{className:"bg-gray-100 flex items-center justify-center min-h-screen"},r("div",{className:"bg-white p-8 rounded-lg shadow-md w-full text-center",style:"max-width: 480px"},r("h1",{className:"text-2xl font-bold text-blue-600 mb-4"},"항해플러스"),r("p",{className:"text-4xl font-bold text-gray-800 mb-4"},"404"),r("p",{className:"text-xl text-gray-600 mb-8"},"페이지를 찾을 수 없습니다"),r("p",{className:"text-gray-600 mb-8"},"요청하신 페이지가 존재하지 않거나 이동되었을 수 있습니다."),r("a",{href:"/","data-link":"",className:"bg-blue-600 text-white px-4 py-2 rounded font-bold"},"홈으로 돌아가기"))),C=({label:t,id:e,type:s="text",value:n,rows:o=void 0})=>r("div",{className:"mb-4"},r("label",{for:e,className:"block text-gray-700 text-sm font-bold mb-2"},t),o?r("textarea",{id:e,name:e,rows:o,className:"w-full p-2 border rounded"},n):r("input",{type:s,id:e,name:e,className:"w-full p-2 border rounded",value:n,required:!0})),Ie=()=>{const{currentUser:t}=i.getState(),{username:e="",email:s="",bio:n=""}=t??{},{handleSubmit:o}=Pe();return r("div",{className:"bg-white p-8 rounded-lg shadow-md"},r("h2",{className:"text-2xl font-bold text-center text-blue-600 mb-8"},"내 프로필"),r("form",{id:"profile-form",onSubmit:o},r(C,{label:"사용자 이름",id:"username",value:e}),r(C,{label:"이메일",id:"email",type:"email",value:s}),r(C,{label:"자기소개",id:"bio",value:n,rows:4}),r("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded font-bold"},"프로필 업데이트")))},ke=()=>{const{loggedIn:t}=i.getState();return r("div",{className:"bg-gray-100 min-h-screen flex justify-center"},r("div",{className:"max-w-md w-full"},r(W,null),r(J,{loggedIn:t}),r("main",{className:"p-4"},r(Ie,null)),r(Q,null)))},y=class y extends Error{constructor(){super(y.MESSAGE)}};y.MESSAGE="ForbiddenError";let I=y;const N=class N extends Error{constructor(){super(N.MESSAGE)}};N.MESSAGE="UnauthorizedError";let M=N;const v=class v extends Error{constructor(){super(v.MESSAGE)}};v.MESSAGE="NotFoundError";let $=v;function je(){const t=w.get()?.getTarget()??Oe,e=document.querySelector("#root");try{ie(r(t,null),e)}catch(s){if(s instanceof I){w.get()?.push("/");return}if(s instanceof M){w.get()?.push("/login");return}console.error(s)}}export{X as B,I as F,Fe as H,Te as L,ke as P,M as U,je as a,r as b,Y as c,x as p,w as r,i as u};
